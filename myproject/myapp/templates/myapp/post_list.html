<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Посты</title>
    {% load static %}
    <style>
        .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px;align-items:start}
        .card{border:1px solid #e5e7eb;border-radius:12px;overflow:hidden}
        .thumb{width:100%;height:180px;object-fit:cover;background:#f3f4f6}
        .body{padding:12px}
        .meta{font-size:12px;color:#6b7280}
        .tags{margin-top:8px;display:flex;flex-wrap:wrap;gap:6px}
        .tag{font-size:12px;border:1px solid #e5e7eb;border-radius:999px;padding:2px 8px}
    </style>
</head>
<body>
<h1>Посты</h1>
<div class="grid">
{% for p in posts %}
  <article class="card">
    {% if p.image %}
      <img class="thumb" src="{{ p.image.url }}" alt="{{ p.title }}">
    {% else %}
      <img class="thumb" src="{% static 'myapp/placeholder.png' %}" alt="placeholder">
    {% endif %}
    <div class="body">
      <h3>{{ p.title }}</h3>
      <div class="meta">
        {% if p.category %}Категория: {{ p.category.name }} · {% endif %}
        {{ p.created_at|date:"d.m.Y H:i" }}
      </div>
      {% if p.tags.exists %}
      <div class="tags">
        {% for t in p.tags.all %}<span class="tag">{{ t.name }}</span>{% endfor %}
      </div>
      {% endif %}
    </div>
  </article>
{% empty %}
  <p>Постов пока нет.</p>
{% endfor %}
</div>
</body>
</html>
